<!doctype html>

<html>
  <head>
    <title>ONESQL Interactive</title>
    <meta charset="utf-8"/>
    
    <link rel="stylesheet" href="ui/lib/codemirror-5.22.0/lib/codemirror.css" />
    <script src="ui/lib/codemirror-5.22.0/lib/codemirror.js"></script>

    <script src="ui/lib/codemirror-5.22.0/mode/javascript/javascript.js"></script>
    <script src="ui/lib/codemirror-5.22.0/mode/sql/sql.js"></script>

    <link rel="stylesheet" href="ui/lib/codemirror-5.22.0/addon/hint/show-hint.css"></script>
    <script src="ui/lib/codemirror-5.22.0/addon/hint/show-hint.js"></script>
    <script src="ui/lib/codemirror-5.22.0/addon/hint/sql-hint.js"></script>

    <script src="ui/onesql.ui.out.js"></script>

    <style>
      .CodeMirror {
        border-top: 1px solid black;
        border-bottom: 1px solid black;
      }

      body {
        font-family: Verdana, Geneva, Tahoma, sans-serif;
        background-color: #f4f4f4;
      }

      th {
        text-align: left;
        font-size: medium;
        font-weight: normal;
        padding-left: 30px;
        text-decoration: none;
      }

      .button {
        background-color: white;
        border-color: dimgray;
        border-width: 1px;
        border-style: solid;
        padding: 2px 5px 2px 5px;
        color: black; 
        font-size: small;
        font-weight: normal;
        text-decoration: none;
      }

      .copyright {
        padding-left: 30px;
        font-size: small;
      }
    </style>

    <script>
      function buttonMouseOver(btn) {
        btn.style.borderWidth = "2px";
        btn.style.padding = "2px 4px 2px 4px";
        btn.style.color = "blue";
        btn.style.borderColor = "black";
      }

      function buttonMouseOut(btn) {
        btn.removeAttribute("style");
      }
    </script>
  </head>

  <body>
    <table width="100%">
      <tr>
        <th width="34%">
          <table width="100%">
            <tr>
              <td>ONESQL</td>
              <td style="text-align: right">
                <a class="button" href="javascript:ui.translate()" onmouseover="buttonMouseOver(this)" onmouseout="buttonMouseOut(this)">Run</a>
                <a class="button" href="" onmouseover="buttonMouseOver(this)" onmouseout="buttonMouseOut(this)">Help</a>
              </td>
            </tr>
          </table>
        </th>
        <th width="33%">
          <table width="100%">
            <tr>
              <td>Semantic Tree (JSON)</td>
              <td style="text-align: right">
                <a class="button" href="javascript:" onmouseover="buttonMouseOver(this)" onmouseout="buttonMouseOut(this)">Copy</a>
              </td>
            </tr>
          </table>
        </th>
        <th width="33%">
          <table width="100%">
            <tr>
              <td>MongoDB (JavaScript)</td>
              <td style="text-align: right">
                <a class="button" href="javascript:" onmouseover="buttonMouseOver(this)" onmouseout="buttonMouseOut(this)">Copy</a>
              </td>
            </tr>
          </table>
        </th>
      </tr>

      <tr>
        <td>
          <form>
            <textarea id="sqlMarker" name="sqlMarker">USE onesqlTest;

FROM demography
WHERE SUBSTR(city, 0, 1) == 'S';</textarea>
    </form>
        </td>
        <td>
          <textarea id="jsonMarker1" name="jsonMarker1"></textarea>
        </td>
        <td>
          <textarea id="jsonMarker2" name="jsonMarker2"></textarea>
        </td>
      </tr>
    </table>

    <br />
    <div class="copyright">Copyright (c) by Zlatko Michailov.</div>
    <div class="copyright">Colorcoding powered by CodeMirror.</div>

    <script>
window.onload = function() {
  window.ui.sqlEditor = CodeMirror.fromTextArea(document.getElementById('sqlMarker'), {
    mode: 'text/x-sql',
    indentWithTabs: false,
    smartIndent: true,
    lineNumbers: true,
    lineWrapping: true,
    matchBrackets : true,
    autofocus: true,
    extraKeys: {"Ctrl-Space": "autocomplete"},
    hintOptions: {tables: {
      users: {name: null, score: null, birthDate: null},
      countries: {name: null, population: null, size: null}
    }}
  });

  window.ui.json1Editor = CodeMirror.fromTextArea(document.getElementById('jsonMarker1'), {
    mode: 'application/json',
    indentWithTabs: false,
    smartIndent: true,
    lineNumbers: true,
    lineWrapping: true,
    matchBrackets : true,
    autofocus: true,
    readOnly: "nocursor"
  });

  window.ui.json2Editor = CodeMirror.fromTextArea(document.getElementById('jsonMarker2'), {
    mode: 'application/json',
    indentWithTabs: false,
    smartIndent: true,
    lineNumbers: true,
    lineWrapping: true,
    matchBrackets : true,
    autofocus: true,
    readOnly: "nocursor"
  });

  var sqlEditor = document.getElementById('sqlMarker').nextSibling;
  var jsonEditor1 = document.getElementById('jsonMarker1').nextSibling
  var jsonEditor2 = document.getElementById('jsonMarker2').nextSibling

  var height = (window.innerHeight - 120) + "px";
  sqlEditor.style.height = height;
  jsonEditor1.style.height = height;
  jsonEditor2.style.height = height;

  jsonEditor1.style.backgroundColor = "#f4f4f4";
  jsonEditor2.style.backgroundColor = "#f4f4f4";
};
    </script>
  </body>
</html>

